(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{62:function(e,t,c){},72:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c.n(n),a=c(22),s=c.n(a),i=(c(62),c(13)),o=c(8),j=c(3),l=c(52),b=Object(l.createAuthProvider)({getAccessToken:"access_token",onUpdateToken:function(e){return fetch("/refresh",{method:"POST",body:e.refresh_token}).then((function(e){return e.json()}))}}),d=b.useAuth,h=(b.authFetch,b.login),O=b.logout;var u=c(1),x=function(){var e=d(),t=Object(j.a)(e,1)[0],c=Object(n.useState)(""),r=Object(j.a)(c,2),a=r[0],s=r[1];if(t){var o=localStorage.getItem("REACT_TOKEN_AUTH_KEY");fetch("".concat("http://localhost:5000","/getUser"),{method:"GET",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(JSON.parse(o))}}).then((function(e){return e.json()})).then((function(e){e?s(e.uname):alert("Cannot get current user")}))}return Object(u.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(u.jsx)(i.b,{className:"navbar-brand",to:"/",children:"DB CRUD Tool"}),Object(u.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(u.jsx)("span",{className:"navbar-toggler-icon"})}),Object(u.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(u.jsx)("ul",{className:"navbar-nav",children:t?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(i.b,{className:"nav-link",to:"/opslog",children:"Operations Log"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(i.b,{className:"nav-link",to:"/perms",children:"Permissions"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsxs)("a",{className:"nav-link",children:["Hi, ",a,"!"]})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)("a",{className:"nav-link active",href:"#",onClick:function(){O()},children:"Log Out"})})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(i.b,{className:"nav-link",to:"/login",children:"Log In"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(i.b,{className:"nav-link",to:"/signup",children:"Sign Up"})})]})})})]})},p=c(6),m=c(10),f=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),c=t[0],r=t[1],a=localStorage.getItem("REACT_TOKEN_AUTH_KEY"),s=function(){var e=Object(m.a)(Object(p.a)().mark((function e(){var t,c;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://localhost:5000","/users"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(a))}});case 2:return t=e.sent,e.next=5,t.json();case 5:c=e.sent,r(c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){s()}),[]),Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col",children:Object(u.jsxs)("table",{className:"table table-striped",children:[Object(u.jsxs)("thead",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{rowspan:"2",style:{verticalAlign:"middle",fontWeight:"bold"},children:"User Name"}),Object(u.jsx)("td",{rowspan:"2",style:{verticalAlign:"middle",fontWeight:"bold"},children:"Email"}),Object(u.jsx)("th",{colspan:"5",style:{textAlign:"center",fontWeight:"bold"},children:"Permissions"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Read"}),Object(u.jsx)("th",{children:"Create"}),Object(u.jsx)("th",{children:"Update"}),Object(u.jsx)("th",{children:"Delete"}),Object(u.jsx)("th",{children:"Admin"})]})]}),Object(u.jsx)("tbody",{children:c.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.username}),Object(u.jsx)("td",{children:e.email}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{checked:1&e.permission,type:"checkbox"})}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{checked:2&e.permission,type:"checkbox"})}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{checked:4&e.permission,type:"checkbox"})}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{checked:8&e.permission,type:"checkbox"})}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{checked:128&e.permission,type:"checkbox"})})]},e.id)}))})]})})})},v=c(12),g=c(2),y=c(80),N=c(54),w="http://localhost:5000",S=function(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(!1),s=Object(j.a)(a,2),i=s[0],l=s[1],b=(Object(n.useRef)(null),Object(o.e)()),d=Object(n.useState)([]),h=Object(j.a)(d,2),O=h[0],x=h[1],f=Object(n.useState)([]),S=Object(j.a)(f,2),k=S[0],T=S[1],C=localStorage.getItem("REACT_TOKEN_AUTH_KEY"),_=Object(n.useState)({}),E=Object(j.a)(_,2),L=E[0],A=E[1],P=function(){var e=Object(m.a)(Object(p.a)().mark((function e(t){var n,a,s;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),i){e.next=7;break}return e.next=4,fetch("".concat(w,"/items"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(C))},body:JSON.stringify(L)});case 4:e.sent,e.next=15;break;case 7:return e.next=9,fetch("".concat(w,"/items/").concat(c),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(C))},body:JSON.stringify(L)});case 9:return n=e.sent,e.next=12,n.json();case 12:e.sent,l(!1),r("");case 15:return e.next=17,U();case 17:for(s in a=Object(g.a)({},L))a[s]="";A(a);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(m.a)(Object(p.a)().mark((function e(){var t,c;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(w,"/items"));case 2:return t=e.sent,e.next=5,t.json();case 5:c=e.sent,x(c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(m.a)(Object(p.a)().mark((function e(t){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this record?")){e.next=7;break}return e.next=4,fetch("".concat(w,"/items/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(C))}});case 4:return e.sent,e.next=7,U();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(m.a)(Object(p.a)().mark((function e(t){var c,n,a;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(w,"/items/").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(C))}});case 2:return c=e.sent,e.next=5,c.json();case 5:n=e.sent,l(!0),r(t),a={},k.forEach((function(e){return a[e.c_name]=n[e.c_name]})),A(a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){T(b.state.columns),U()}),[]),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-md-4",children:Object(u.jsxs)("form",{className:"card card-body",children:[k.map((function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(y.a.Group,{children:Object(u.jsx)(y.a.Control,{type:"text",onChange:function(t){return A(Object(g.a)(Object(g.a)({},L),{},Object(v.a)({},e.c_name,t.target.value)))},value:L[e.c_name],placeholder:e.c_name})}),Object(u.jsx)("br",{})]})})),Object(u.jsx)(N.a,{variant:"primary",onClick:P,children:i?"Update":"Add"})]})}),Object(u.jsx)("div",{className:"col-md-6",children:Object(u.jsxs)("table",{className:"table table-striped",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[k.map((function(e){return Object(u.jsx)("th",{children:e.c_name})})),Object(u.jsx)("th",{children:"Operations"})]})}),Object(u.jsx)("tbody",{children:O.map((function(e){return Object(u.jsxs)("tr",{children:[k.map((function(t){return Object(u.jsx)("td",{children:e[t.c_name]})})),Object(u.jsxs)("td",{children:[Object(u.jsx)("button",{className:"btn btn-secondary btn-sm btn-block",onClick:function(t){return q(e.id)},children:"Edit"}),Object(u.jsx)("button",{className:"btn btn-danger btn-sm btn-block",onClick:function(t){return G(e.id)},children:"Delete"})]})]},e.id)}))})]})})]})},k=c(27),T=function(){var e,t,c=Object(k.a)(),n=c.register,r=c.handleSubmit,a=c.reset,s=c.formState.errors,j=Object(o.f)();return Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)("div",{className:"form",children:[Object(u.jsx)("h1",{children:"Login Page"}),Object(u.jsxs)("form",{children:[Object(u.jsxs)(y.a.Group,{children:[Object(u.jsx)(y.a.Label,{children:"Username"}),Object(u.jsx)(y.a.Control,Object(g.a)({type:"text",placeholder:"Your username"},n("username",{required:!0,maxLength:25})))]}),s.username&&Object(u.jsx)("p",{style:{color:"red"},children:Object(u.jsx)("small",{children:"Username is required"})}),"maxLength"===(null===(e=s.username)||void 0===e?void 0:e.type)&&Object(u.jsx)("p",{style:{color:"red"},children:Object(u.jsx)("small",{children:"Username should be 25 characters"})}),Object(u.jsx)("br",{}),Object(u.jsxs)(y.a.Group,{children:[Object(u.jsx)(y.a.Label,{children:"Password"}),Object(u.jsx)(y.a.Control,Object(g.a)({type:"password",placeholder:"Your password"},n("password",{required:!0,minLength:8})))]}),s.username&&Object(u.jsx)("p",{style:{color:"red"},children:Object(u.jsx)("small",{children:"Password is required"})}),"maxLength"===(null===(t=s.password)||void 0===t?void 0:t.type)&&Object(u.jsx)("p",{style:{color:"red"},children:Object(u.jsx)("small",{children:"Password should be more than 8 characters"})}),Object(u.jsx)("br",{}),Object(u.jsx)(y.a.Group,{children:Object(u.jsx)(N.a,{as:"sub",variant:"primary",onClick:r((function(e){console.log(e);var t={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)};fetch("".concat("http://localhost:5000","/login"),t).then((function(e){return e.json()})).then((function(t){console.log(t),t?(h(t.access_token),console.log(e.username),j("/",{state:{uname:e.username}})):alert("Invalid username or password")})),a()})),children:"Login"})}),Object(u.jsx)("br",{}),Object(u.jsx)(y.a.Group,{children:Object(u.jsxs)("small",{children:["Do not have an account? ",Object(u.jsx)(i.b,{to:"/signup",children:"Create One"})]})})]})]})})},C=c(79),_=function(){var e,t,c,r,a=Object(k.a)(),s=a.register,o=a.handleSubmit,l=(a.watch,a.reset),b=a.formState.errors,d=Object(n.useState)(!1),h=Object(j.a)(d,2),O=h[0],x=h[1],p=Object(n.useState)(""),m=Object(j.a)(p,2),f=m[0],v=m[1];return Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)("div",{className:"form",children:[O?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(C.a,{variant:"success",onClose:function(){x(!1)},dismissible:!0,children:Object(u.jsx)("p",{children:f})}),Object(u.jsx)("h1",{children:"Sign Up Page"})]}):Object(u.jsx)("h1",{children:"Sign Up Page"}),Object(u.jsxs)("form",{children:[Object(u.jsxs)(y.a.Group,{children:[Object(u.jsx)(y.a.Label,{children:"Username"}),Object(u.jsx)(y.a.Control,Object(g.a)({type:"text",placeholder:"Your username"},s("username",{required:!0,maxLength:25}))),b.username&&Object(u.jsx)("small",{style:{color:"red"},children:"Username is required"}),"maxLength"===(null===(e=b.username)||void 0===e?void 0:e.type)&&Object(u.jsx)("p",{style:{color:"red"},children:Object(u.jsx)("small",{children:"Max characters should be 25 "})})]}),Object(u.jsx)("br",{}),Object(u.jsxs)(y.a.Group,{children:[Object(u.jsx)(y.a.Label,{children:"Email"}),Object(u.jsx)(y.a.Control,Object(g.a)({type:"email",placeholder:"Your email"},s("email",{required:!0,maxLength:80}))),b.email&&Object(u.jsx)("p",{style:{color:"red"},children:Object(u.jsx)("small",{children:"Email is required"})}),"maxLength"===(null===(t=b.email)||void 0===t?void 0:t.type)&&Object(u.jsx)("p",{style:{color:"red"},children:Object(u.jsx)("small",{children:"Max characters should be 80"})})]}),Object(u.jsx)("br",{}),Object(u.jsxs)(y.a.Group,{children:[Object(u.jsx)(y.a.Label,{children:"Password"}),Object(u.jsx)(y.a.Control,Object(g.a)({type:"password",placeholder:"Your password"},s("password",{required:!0,minLength:8}))),b.password&&Object(u.jsx)("p",{style:{color:"red"},children:Object(u.jsx)("small",{children:"Password is required"})}),"minLength"===(null===(c=b.password)||void 0===c?void 0:c.type)&&Object(u.jsx)("p",{style:{color:"red"},children:Object(u.jsx)("small",{children:"Min characters should be 8"})})]}),Object(u.jsx)("br",{}),Object(u.jsxs)(y.a.Group,{children:[Object(u.jsx)(y.a.Label,{children:"Confirm Password"}),Object(u.jsx)(y.a.Control,Object(g.a)({type:"password",placeholder:"Your password"},s("confirmPassword",{required:!0,minLength:8}))),b.confirmPassword&&Object(u.jsx)("p",{style:{color:"red"},children:Object(u.jsx)("small",{children:"Confirm Password is required"})}),"minLength"===(null===(r=b.confirmPassword)||void 0===r?void 0:r.type)&&Object(u.jsx)("p",{style:{color:"red"},children:Object(u.jsx)("small",{children:"Min characters should be 8"})})]}),Object(u.jsx)("br",{}),Object(u.jsx)(y.a.Group,{children:Object(u.jsx)(N.a,{as:"sub",variant:"primary",onClick:o((function(e){if(e.password===e.confirmPassword){var t={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:e.username,email:e.email,password:e.password})};fetch("".concat("http://localhost:5000","/signup"),t).then((function(e){return e.json()})).then((function(e){console.log(e),v(e.message),x(!0)})).catch((function(e){return console.log(e)})),l()}else alert("Passwords do not match")})),children:"SignUp"})}),Object(u.jsx)("br",{}),Object(u.jsx)(y.a.Group,{children:Object(u.jsxs)("small",{children:["Already have an account, ",Object(u.jsx)(i.b,{to:"/login",children:"Log In"})]})}),Object(u.jsx)("br",{})]})]})})},E=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),c=t[0],r=t[1],a=localStorage.getItem("REACT_TOKEN_AUTH_KEY"),s=function(){var e=Object(m.a)(Object(p.a)().mark((function e(){var t,c;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://localhost:5000","/logs"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.parse(a))}});case 2:return t=e.sent,e.next=5,t.json();case 5:c=e.sent,r(c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){s()}),[]),Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col",children:Object(u.jsxs)("table",{className:"table table-striped",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{style:{fontWeight:"bold"},children:[Object(u.jsx)("th",{children:"User Name"}),Object(u.jsx)("th",{children:"Timestamp"}),Object(u.jsx)("th",{children:"Database"}),Object(u.jsx)("th",{children:"Table Name"}),Object(u.jsx)("th",{children:"Operation"}),Object(u.jsx)("th",{children:"Operation Object ID"}),Object(u.jsx)("th",{children:"Request Body"})]})}),Object(u.jsx)("tbody",{children:c.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.username}),Object(u.jsx)("td",{children:e.timestamp}),Object(u.jsx)("td",{children:e.db_uri}),Object(u.jsx)("td",{children:e.tb_name}),Object(u.jsx)("td",{children:e.operation}),Object(u.jsx)("td",{children:e.ops_obj_id}),Object(u.jsx)("td",{children:e.request_body})]},e.id)}))})]})})})},L=c(78),A=c(56),P=c(29),U="http://localhost:5000",G=function(){var e=Object(k.a)(),t=(e.register,e.handleSubmit,Object(n.useState)("")),c=Object(j.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)([]),i=Object(j.a)(s,2),l=i[0],b=i[1],d=Object(n.useState)([]),h=Object(j.a)(d,2),O=h[0],x=h[1],f=Object(n.useState)({}),w=Object(j.a)(f,2),S=w[0],T=w[1],C=Object(n.useState)(!1),_=Object(j.a)(C,2),E=_[0],G=_[1],q=Object(n.useState)(!1),J=Object(j.a)(q,2),B=J[0],D=J[1],I=Object(n.useState)("Table Name"),Y=Object(j.a)(I,2),K=Y[0],R=Y[1],z=Object(o.f)(),M=function(){var e=Object(m.a)(Object(p.a)().mark((function e(t){var c,n;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("".concat(U,"/dbset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uri:r})});case 3:return c=e.sent,e.next=6,c.json();case 6:n=e.sent,b(n),G(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(m.a)(Object(p.a)().mark((function e(t){var c,n;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(t),e.next=3,fetch("".concat(U,"/tbset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({table_name:t})});case 3:return c=e.sent,e.next=6,c.json();case 6:n=e.sent,x(n),D(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e,t){return function(){T(Object(g.a)(Object(g.a)({},S),{},Object(v.a)({},t,S[t]?null:e)))}};return Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)("div",{className:"form",children:[Object(u.jsx)("h1",{children:"Database Setting"}),Object(u.jsx)("br",{}),Object(u.jsxs)(y.a,{children:[Object(u.jsxs)(A.a,{className:"align-items-center",children:[Object(u.jsx)(P.a,{xs:"auto",children:Object(u.jsx)(y.a.Label,{children:"URI:"})}),Object(u.jsx)(P.a,{xs:"auto",children:Object(u.jsx)(y.a.Control,{type:"text",placeholder:"sqlite:///myweb.db",onChange:function(e){return a(e.target.value)},value:r})}),Object(u.jsx)(P.a,{xs:"auto",children:Object(u.jsx)(N.a,{variant:"primary",onClick:M,children:"Connect"})})]}),Object(u.jsx)("br",{}),E&&Object(u.jsx)(y.a.Group,{children:Object(u.jsxs)(L.a,{onSelect:W,children:[Object(u.jsx)(L.a.Toggle,{variant:"secondary",id:"dropdown-basic",children:K}),Object(u.jsx)(L.a.Menu,{children:l.map((function(e){return Object(u.jsx)(L.a.Item,{eventKey:e,children:e})}))})]})}),B&&Object(u.jsxs)(y.a.Group,{children:[O.map((function(e,t){return Object(u.jsxs)("tr",{style:{display:"flex",width:"150px"},children:[Object(u.jsx)("input",{onChange:F(e,t),checked:S[t],style:{margin:"20px"},type:"checkbox"}),Object(u.jsx)("td",{style:{margin:"20px"},children:e.c_name}),Object(u.jsx)("td",{style:{margin:"20px"},children:e.c_type})]},t)})),Object(u.jsx)("br",{}),Object(u.jsx)(N.a,{variant:"primary",onClick:function(e){var t=Object.values(S).filter((function(e){return null!==e}));z("/it",{state:{columns:t}})},children:"Next"})]})]})]})})};var q=function(){return Object(u.jsxs)(i.a,{children:[Object(u.jsx)(x,{}),Object(u.jsx)("div",{className:"container p-4",children:Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{path:"/perms",element:Object(u.jsx)(f,{})}),Object(u.jsx)(o.a,{path:"/login",element:Object(u.jsx)(T,{})}),Object(u.jsx)(o.a,{path:"/signup",element:Object(u.jsx)(_,{})}),Object(u.jsx)(o.a,{path:"/it",element:Object(u.jsx)(S,{})}),Object(u.jsx)(o.a,{path:"/",element:Object(u.jsx)(G,{})}),Object(u.jsx)(o.a,{path:"/opslog",element:Object(u.jsx)(E,{})})]})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c(71);s.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(q,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[72,1,2]]]);
//# sourceMappingURL=main.8c929169.chunk.js.map